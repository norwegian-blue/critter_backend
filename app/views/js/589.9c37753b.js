"use strict";(self["webpackChunkcritter_frontend"]=self["webpackChunkcritter_frontend"]||[]).push([[589],{2589:function(e,s,a){a.r(s),a.d(s,{default:function(){return W}});var r=a(3396),t=a(7139);const d=e=>((0,r.dD)("data-v-83df2474"),e=e(),(0,r.Cn)(),e),n={class:"container col-md-12"},o={key:0,id:"userName"},i={class:"m-3 text-center"},u={class:"card card-container"},c=d((()=>(0,r._)("img",{class:"rounded mx-auto mb-3",src:"hedgehogMagician.jpg",style:{width:"75%",height:"75%"}},null,-1))),l={class:"form-group"},m=d((()=>(0,r._)("label",{for:"username"},"New Username",-1))),h={class:"form-group"},p=d((()=>(0,r._)("label",{for:"password"},"New Password",-1))),g={class:"form-group mb-0"},b=["disabled"],f={class:"form-group mt-3"},_={class:"card card-container"},w=d((()=>(0,r._)("img",{class:"rounded mx-auto mb-3",src:"rabbitMoon.jpg",style:{width:"50%",height:"50%"}},null,-1))),v={class:"form-group"},M=["disabled"],k={class:"form-group mt-3"},y={key:0,class:"alert alert-danger",role:"alert"};function S(e,s,a,d,S,L){const U=(0,r.up)("Field"),D=(0,r.up)("ErrorMessage"),x=(0,r.up)("Form");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("header",null,[L.currentUser?((0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("h4",i,"𐂊 - "+(0,t.zw)(L.currentUser.username)+" - 𐂊",1)])):(0,r.kq)("",!0)]),(0,r._)("div",u,[c,(0,r.Wm)(x,{onSubmit:L.handleUpdate,"validation-schema":S.schema},{default:(0,r.w5)((()=>[(0,r._)("div",l,[m,(0,r.Wm)(U,{name:"username",type:"text",class:"form-control"}),(0,r.Wm)(D,{name:"username",class:"error-feedback"})]),(0,r._)("div",h,[p,(0,r.Wm)(U,{name:"password",type:"password",class:"form-control"}),(0,r.Wm)(D,{name:"password",class:"error-feedback"})]),(0,r._)("div",g,[(0,r._)("button",{class:"btn btn-bosco btn-block",disabled:S.updLoading}," Update Profile ",8,b)]),(0,r._)("div",f,[S.updMessage?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,t.C_)(["alert",S.updSuccess?"alert-success":"alert-danger"]),role:"alert"},(0,t.zw)(S.updMessage),3)):(0,r.kq)("",!0)])])),_:1},8,["onSubmit","validation-schema"])]),(0,r._)("div",_,[w,(0,r.Wm)(x,{onSubmit:L.handleDelete},{default:(0,r.w5)((()=>[(0,r._)("div",v,[(0,r._)("button",{class:"btn btn-bosco btn-block",disabled:S.delLoading}," Delete Profile ",8,M)]),(0,r._)("div",k,[S.delMessage?((0,r.wg)(),(0,r.iD)("div",y,(0,t.zw)(S.delMessage),1)):(0,r.kq)("",!0)])])),_:1},8,["onSubmit"])])])}var L=a(5708),U=a(6542),D={name:"Profile",components:{Form:L.l0,Field:L.gN,ErrorMessage:L.Bc},data(){const e=U.Ry().shape({username:U.Z_().required("Username is required!").min(3,"Must be at least 3 characters!").max(20,"Must be maximum 20 characters!"),password:U.Z_().required("Password is required!").min(6,"Must be at least 6 characters!").max(40,"Must be maximum 40 character")});return{updLoading:!1,updMessage:"",updSuccess:!1,delLoading:!1,delMessage:"",schema:e}},computed:{currentUser(){return this.$store.state.auth.user}},updated(){if(!this.$store.state.auth.status.loggedIn)return this.$router.push("/Landing")},methods:{handleUpdate(e){this.updLoading=!0,this.updMessage="",this.updSuccess=!1,this.$store.dispatch("auth/update",{user:e,userId:this.currentUser.id}).then((e=>{this.updLoading=!1,this.updMessage="Successfully updated user info!",this.updSuccess=!0}),(e=>{this.updLoading=!1,this.updMessage=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()}))},handleDelete(){confirm("Do you really want to permanently delete current user?")&&(this.delLoading=!0,this.$store.dispatch("auth/delete",this.currentUser.id).then((()=>{this.$router.push("/home")}),(e=>{this.delLoading=!1,this.delMessage=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})))}}},x=a(89);const q=(0,x.Z)(D,[["render",S],["__scopeId","data-v-83df2474"]]);var W=q}}]);
//# sourceMappingURL=589.9c37753b.js.map